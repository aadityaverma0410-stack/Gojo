<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gojo Archive | Domain Expansion</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <style>
        :root { --jjk-purple: #a855f7; --jjk-blue: #3b82f6; --black-flash: #ff0033; }
        body { background: #000; color: #fff; font-family: 'Courier New', monospace; overflow-x: hidden; transition: 0.3s; }
        
        /* Cinematic UI */
        .sorcerer-header { border-bottom: 2px solid var(--jjk-purple); padding: 20px; text-shadow: 0 0 10px var(--jjk-purple); }
        .controls { display: flex; gap: 10px; justify-content: center; padding: 20px; flex-wrap: wrap; }
        
        button { 
            background: transparent; border: 1px solid #fff; color: #fff; padding: 10px 15px; 
            cursor: pointer; text-transform: uppercase; font-weight: bold; transition: 0.3s;
        }
        button:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }

        /* Video Overlay */
        #videoOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; background: #000; }
        video { width: 100%; height: 100%; object-fit: cover; }

        /* Black Flash Animation */
        @keyframes blackFlash {
            0% { background: #000; }
            20% { background: var(--black-flash); transform: scale(1.05) rotate(1deg); }
            40% { background: #000; transform: scale(1) rotate(-1deg); }
            100% { background: #000; }
        }
        .black-flash-active { animation: blackFlash 0.3s ease-in-out 2; }
    </style>
</head>
<body id="mainBody">

    <div class="sorcerer-header">
        <h1>ðŸ§¿ GOJO ARCHIVE</h1>
        <p>SORCERER: TANISH | 140 days until Unsealing</p>
    </div>

    <div class="controls">
        <button onclick="window.location.reload()">NOT INTERESTED ðŸš«</button>
        <button onclick="nextTrack()">NEXT TRACK ðŸŽµ</button>
        <button onclick="playDomain()">GOJO VS SUKUNA ðŸ¤ž</button>
        <button onclick="triggerBlackFlash()">BLACK FLASH âš¡</button>
    </div>

    <div id="videoOverlay">
        <video id="domainVideo">
            <source src="domain_expansion.mp4" type="video/mp4">
        </video>
    </div>

    <div class="mission-archive-grid" id="gallery">
        </div>

    <script>
        // --- 1. CONFIG (Paste your real keys here!) ---
        const firebaseConfig = {
            apiKey: "YOUR_KEY",
            projectId: "gojo-archive",
            storageBucket: "gojo-archive.appspot.com",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- 2. AUDIO SYSTEM ---
        const playlist = ["TUCA DONKA - CURSEDEVIL, DJ FKU, Skorde.mp3", "Lady Gaga - Judas - GOJO VS SUKUNA.mp3", "SPECIALZ Song of King Gnu â€§ 2023.mp3", "daddy's home.mp3"]; // Update with your actual files!
        let currentTrack = 0;
        let bgMusic = new Audio(playlist[0]);

        function nextTrack() {
            bgMusic.pause();
            currentTrack = (currentTrack + 1) % playlist.length;
            bgMusic = new Audio(playlist[currentTrack]);
            bgMusic.play();
        }

        // --- 3. DOMAIN EXPANSION ---
        function playDomain() {
            const overlay = document.getElementById("videoOverlay");
            const video = document.getElementById("domainVideo");
            overlay.style.display = "block";
            video.play();
            video.onended = () => { overlay.style.display = "none"; };
        }

        // --- 4. BLACK FLASH ---
        function triggerBlackFlash() {
            const body = document.getElementById("mainBody");
            body.classList.add("black-flash-active");
            setTimeout(() => body.classList.remove("black-flash-active"), 600);
            // Optional: Play a hit sound
            new Audio('hit_sound.mp3').play();
        }

        // --- 5. AUTH & REAL-TIME GALLERY ---
        auth.onAuthStateChanged(user => { if(!user) auth.signInAnonymously(); });

        db.collection("memories").orderBy("time", "desc").onSnapshot(snap => {
            const gallery = document.getElementById("gallery");
            gallery.innerHTML = "";
            snap.forEach(doc => {
                const data = doc.data();
                gallery.innerHTML += `<img src="${data.url}" style="width:200px; margin:10px; filter:blur(5px);" onclick="this.style.filter='none'">`;
            });
        });
    </script>
</body>
</html>
